#!/bin/bash
# Script: connect
# Description: Script for hand-shaking with the IRC server
#
# - Creates/Resets ACL management file -> $nick.acl
# - Creates/Resets input file -> $nick.input
# - Sets $owner variable
# - Sets IRC username, realname and nickname
# - Initiates sub-script to join all configured channels

rm $nick.acl &> /dev/null
touch $nick.acl

owner=$(egrep :owner < var/users | cut -d: -f1)

echo "nick $nick" > $nick.input
echo "user $nick +iw $nick :$0" >> $nick.input
(sleep 3
for channel in $(cat var/channels)
do
	[[ -n $channel ]] && echo "join " $channel >> $nick.input
done
) &

